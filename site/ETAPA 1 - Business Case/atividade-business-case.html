<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atividade ‚Äî Business Case Interativo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .card { background: #fff; border: 1px solid #e5e7eb; border-radius: 1rem; box-shadow: 0 4px 18px rgba(2,6,23,.06); }
        .hint { font-size: .9rem; color: #475569; }
        .req::after { content: " *"; color: #dc2626; font-weight: 700; }
        .mono { font-family: ui-monospace, Menlo, Consolas, monospace; }
    </style>
</head>
<body class="bg-gray-50 p-6">
    <div class="max-w-7xl mx-auto">
        <!-- Navega√ß√£o -->
        <nav class="mb-6">
            <a href="../etapa-01-business-case/" class="inline-flex items-center text-blue-600 hover:text-blue-800 transition-colors">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                </svg>
                Voltar ao √çndice da ETAPA 1 ‚Äî Business Case
            </a>
        </nav>

        <h1 class="text-3xl font-bold text-gray-900 mb-6">Atividade Interativa: Constru√ß√£o de Business Case</h1>
        <p class="text-gray-600 mb-8">Baseado no Cap√≠tulo 5 de John Ladley. Preencha os casos de uso abaixo e veja a tabela do Business Case ser gerada em tempo real.</p>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Coluna Esquerda: Formul√°rio -->
            <div class="space-y-6">
                <div class="card p-6">
                    <h2 class="text-xl font-semibold mb-4">Adicionar Caso de Uso</h2>
                    <form id="ucForm" class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium req">Nome do Caso de Uso</label>
                            <input type="text" id="ucNome" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" required>
                            <p class="hint">Ex.: "Implementa√ß√£o de Sistema de Qualidade de Dados"</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium req">Descri√ß√£o Resumida</label>
                            <textarea id="ucDescricao" rows="3" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" required></textarea>
                            <p class="hint">Descreva brevemente o que o caso de uso envolve.</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium req">Benef√≠cios Tang√≠veis (valores documentados)</label>
                            <textarea id="ucTangiveis" rows="3" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" required></textarea>
                            <p class="hint">Descreva como se mede e o valor. Ex.: "Redu√ß√£o de custos operacionais em ‚Ç¨50.000/ano; Aumento de efici√™ncia em +25%"</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium req">Benef√≠cios Intang√≠veis (impacto dif√≠cil de quantificar)</label>
                            <textarea id="ucIntangiveis" rows="3" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" required></textarea>
                            <p class="hint">Ex.: "Melhoria da confian√ßa regulat√≥ria; Aumento da reputa√ß√£o organizacional; Cultura de inova√ß√£o"</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium">Custos Evitados / Ganhos Estimados</label>
                            <textarea id="ucCustos" rows="2" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"></textarea>
                            <p class="hint">Ex.: "Economia em multas regulat√≥rias estimada em ‚Ç¨20.000"</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium">Observa√ß√µes Adicionais</label>
                            <textarea id="ucObservacoes" rows="2" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"></textarea>
                            <p class="hint">Quaisquer notas ou considera√ß√µes adicionais.</p>
                        </div>
                        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">Adicionar Caso de Uso</button>
                    </form>
                </div>

                <div class="card p-6">
                    <h3 class="text-lg font-semibold mb-4">Casos de Uso Adicionados</h3>
                    <div id="listaUC" class="space-y-3">
                        <p class="text-gray-500 text-sm">Nenhum caso de uso adicionado ainda. Use o formul√°rio acima para come√ßar.</p>
                    </div>
                </div>

                <div class="card p-6">
                    <h3 class="text-lg font-semibold mb-4">A√ß√µes</h3>
                    <div class="space-y-2">
                        <button id="btnExemplo" class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 w-full transition-colors">üé≤ Gerar Exemplo</button>
                        <button id="btnExemplosDetalhados" class="bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 w-full transition-colors">üìã Exemplos Detalhados</button>
                        <button id="btnLimpar" class="bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 w-full transition-colors">üóëÔ∏è Limpar Tudo</button>
                        <button id="btnExportMD" class="bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 w-full transition-colors">üìù Exportar Markdown</button>
                        <button id="btnExportCSV" class="bg-orange-600 text-white px-4 py-2 rounded-md hover:bg-orange-700 w-full transition-colors">üìä Exportar CSV</button>
                    </div>
                </div>
            </div>

            <!-- Coluna Direita: Pr√©-visualiza√ß√£o -->
            <div class="space-y-6">
                <div class="card p-6">
                    <h2 class="text-xl font-semibold mb-4">Pr√©-visualiza√ß√£o do Business Case</h2>
                    <div id="preview" class="space-y-4">
                        <div id="tabelaTangiveis" class="overflow-x-auto"></div>
                        <div id="tabelaIntangiveis" class="overflow-x-auto"></div>
                    </div>
                </div>

                <div class="card p-6">
                    <h3 class="text-lg font-semibold mb-4">Feedback Autom√°tico</h3>
                    <div id="feedback" class="text-sm">
                        <p>Adicione casos de uso para ver o feedback.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let casosUso = [];
        let exemploIndex = 0;
        let exemploDetalhadoIndex = 0;

        const exemplos = [
            {
                titulo: "Exemplo 1: Banco",
                casos: [
                    {
                        nome: "Implementa√ß√£o de Sistema de Qualidade de Dados",
                        descricao: "Sistema automatizado para valida√ß√£o e limpeza de dados de clientes.",
                        tangiveis: "Redu√ß√£o de multas regulat√≥rias em ‚Ç¨150.000/ano; Melhoria da margem operacional em 2%.",
                        intangiveis: "Aumento da confian√ßa regulat√≥ria; Melhoria da cultura de conformidade.",
                        custos: "Economia estimada em ‚Ç¨50.000 em auditorias manuais.",
                        observacoes: "KPIs: Taxa de erro de dados reduzida para <0.1%."
                    },
                    {
                        nome: "Dashboard de Monitoriza√ß√£o de Riscos",
                        descricao: "Painel em tempo real para monitoriza√ß√£o de riscos de dados.",
                        tangiveis: "Redu√ß√£o de perdas por fraudes em ‚Ç¨200.000/ano.",
                        intangiveis: "Melhoria da reputa√ß√£o junto aos clientes; Aumento da confian√ßa interna.",
                        custos: "Ganhos estimados em ‚Ç¨30.000 por ano em efici√™ncia operacional.",
                        observacoes: "KPIs: Tempo de resposta a incidentes reduzido em 50%."
                    }
                ]
            },
            {
                titulo: "Exemplo 2: Universidade",
                casos: [
                    {
                        nome: "Sistema Integrado de Gest√£o Acad√©mica",
                        descricao: "Plataforma unificada para gest√£o de matr√≠culas e dados acad√©micos.",
                        tangiveis: "Redu√ß√£o de abandono escolar em 15%; Efici√™ncia em processos administrativos em 30%.",
                        intangiveis: "Melhoria da reputa√ß√£o acad√©mica; Aumento da satisfa√ß√£o dos estudantes.",
                        custos: "Economia em ‚Ç¨100.000/ano em processos manuais.",
                        observacoes: "KPIs: Tempo m√©dio de resposta a estudantes reduzido para 2 horas."
                    },
                    {
                        nome: "An√°lise Preditiva de Desempenho",
                        descricao: "Modelo de machine learning para prever dificuldades acad√©micas.",
                        tangiveis: "Aumento da taxa de conclus√£o em 10%.",
                        intangiveis: "Melhoria da experi√™ncia educativa; Fortalecimento da marca institucional.",
                        custos: "Ganhos estimados em ‚Ç¨75.000 por ano em reten√ß√£o de estudantes.",
                        observacoes: "KPIs: Precis√£o do modelo em 85%."
                    }
                ]
            },
            {
                titulo: "Exemplo 3: Hospital",
                casos: [
                    {
                        nome: "Sistema de Registos Eletr√≥nicos de Sa√∫de",
                        descricao: "Digitaliza√ß√£o completa dos registos m√©dicos e hist√≥ricos cl√≠nicos.",
                        tangiveis: "Melhoria de outcomes cl√≠nicos em 20%; Redu√ß√£o de erros m√©dicos em 25%.",
                        intangiveis: "Aumento da confian√ßa dos pacientes; Melhoria da reputa√ß√£o em rankings.",
                        custos: "Poupan√ßa em tempo de internamento estimada em ‚Ç¨500.000/ano.",
                        observacoes: "KPIs: Taxa de readmiss√µes reduzida em 15%."
                    },
                    {
                        nome: "An√°lise de Dados para Preven√ß√£o",
                        descricao: "Sistema de an√°lise preditiva para identificar riscos de sa√∫de.",
                        tangiveis: "Redu√ß√£o de custos com tratamentos de emerg√™ncia em ‚Ç¨300.000/ano.",
                        intangiveis: "Melhoria da qualidade de cuidados; Aumento da satisfa√ß√£o dos pacientes.",
                        custos: "Economia estimada em ‚Ç¨150.000 em procedimentos desnecess√°rios.",
                        observacoes: "KPIs: Tempo m√©dio de diagn√≥stico reduzido em 40%."
                    }
                ]
            },
            {
                titulo: "Exemplo 4: Munic√≠pio",
                casos: [
                    {
                        nome: "Portal Digital de Servi√ßos Municipais",
                        descricao: "Plataforma online para acesso a servi√ßos p√∫blicos e dados.",
                        tangiveis: "Redu√ß√£o de custos de opera√ß√µes manuais em ‚Ç¨200.000/ano.",
                        intangiveis: "Aumento da transpar√™ncia com cidad√£os; Melhoria da efici√™ncia em servi√ßos digitais.",
                        custos: "Ganhos estimados em ‚Ç¨100.000 por ano em produtividade.",
                        observacoes: "KPIs: Tempo m√©dio de atendimento reduzido para 5 minutos."
                    },
                    {
                        nome: "Sistema de Gest√£o de Dados Urbanos",
                        descricao: "Centraliza√ß√£o e an√°lise de dados urbanos para planeamento.",
                        tangiveis: "Otimiza√ß√£o de recursos p√∫blicos em 15%.",
                        intangiveis: "Melhoria da qualidade de vida urbana; Fortalecimento da confian√ßa p√∫blica.",
                        custos: "Economia estimada em ‚Ç¨75.000 em duplica√ß√£o de esfor√ßos.",
                        observacoes: "KPIs: Efici√™ncia em projetos urbanos aumentada em 25%."
                    }
                ]
            }
        ];

        const exemplosDetalhados = [
            {
                titulo: "Autarquia ‚Äî Transforma√ß√£o Digital Municipal",
                casos: [
                    {
                        nome: "Reduzir custos operacionais",
                        descricao: "Poupan√ßa em papel e log√≠stica atrav√©s da digitaliza√ß√£o",
                        tangiveis: "Redu√ß√£o de processos em papel em ‚Ç¨40.000/ano; Economia em arquivo f√≠sico em ‚Ç¨15.000/ano",
                        intangiveis: "Aumento da transpar√™ncia; Inclus√£o digital; Reputa√ß√£o institucional",
                        custos: "Economia estimada em ‚Ç¨15.000/ano em material de escrit√≥rio.",
                        observacoes: "Portal aberto de dados municipais refor√ßa confian√ßa cidad√£. KPIs: 70% redu√ß√£o no uso de papel."
                    },
                    {
                        nome: "Melhorar tempo m√©dio de resposta",
                        descricao: "De 30 para 7 dias no licenciamento urbano",
                        tangiveis: "Digitaliza√ß√£o de pedidos de mun√≠cipes com +65% efici√™ncia; Redu√ß√£o de tempo em 23 dias",
                        intangiveis: "Forma√ß√£o gratuita em literacia digital; Melhoria da imagem social",
                        custos: "Ganhos estimados em ‚Ç¨25.000/ano em produtividade.",
                        observacoes: "Melhora imagem social da autarquia. KPIs: 65% melhoria na efici√™ncia."
                    },
                    {
                        nome: "Otimizar consumo de energia",
                        descricao: "Redu√ß√£o de 12% no consumo energ√©tico",
                        tangiveis: "Implementa√ß√£o de sensores IoT em edif√≠cios municipais em ‚Ç¨90.000/ano; Redu√ß√£o de 12% no consumo",
                        intangiveis: "Reconhecimento em programas nacionais de Smart Cities",
                        custos: "Economia estimada em ‚Ç¨30.000/ano em manuten√ß√£o preventiva.",
                        observacoes: "Posiciona o munic√≠pio como inovador. KPIs: 12% redu√ß√£o energ√©tica."
                    }
                ]
            },
            {
                titulo: "Banco ‚Äî Governan√ßa e Seguran√ßa dos Dados",
                casos: [
                    {
                        nome: "Reduzir multas regulat√≥rias",
                        descricao: "Redu√ß√£o de ‚Ç¨2M/ano em penaliza√ß√µes do BdP/ECB",
                        tangiveis: "Evitar san√ß√µes do BdP/ECB em ‚Ç¨2.000.000/ano; Economia de 80% em multas regulat√≥rias",
                        intangiveis: "Confian√ßa regulat√≥ria; Auditorias sem n√£o conformidades",
                        custos: "Ganhos estimados em ‚Ç¨500.000/ano em processos de auditoria.",
                        observacoes: "Facilita expans√£o internacional. KPIs: 0 multas regulat√≥rias."
                    },
                    {
                        nome: "Aumentar margem operacional", 
                        descricao: "Redu√ß√£o de 15% em retrabalho de relat√≥rios anuais",
                        tangiveis: "Redu√ß√£o de erros de reporte financeiro em ‚Ç¨3.500.000/ano; -15% retrabalho em relat√≥rios",
                        intangiveis: "Melhor decis√£o estrat√©gica; Dire√ß√£o de risco mais √°gil",
                        custos: "Economia estimada em ‚Ç¨800.000/ano em corre√ß√µes manuais.",
                        observacoes: "Dados mais fi√°veis para an√°lise de risco. KPIs: 99.5% precis√£o de dados."
                    },
                    {
                        nome: "Efici√™ncia em onboarding de clientes",
                        descricao: "Tempo reduzido de 14 para 3 dias",
                        tangiveis: "Automatiza√ß√£o KYC com +30% novos clientes; Tempo reduzido em 11 dias por cliente",
                        intangiveis: "Reputa√ß√£o no mercado; Atrai investidores",
                        custos: "Ganhos estimados em ‚Ç¨1.200.000/ano em efici√™ncia operacional.",
                        observacoes: "Relat√≥rios reconhecidos pela Deloitte/KPMG. KPIs: 30% aumento capta√ß√£o."
                    }
                ]
            },
            {
                titulo: "Cadeia de Supermercados ‚Äî Data Governance e Analytics",
                casos: [
                    {
                        nome: "Redu√ß√£o de Desperd√≠cio Alimentar",
                        descricao: "Gest√£o preditiva de stocks para minimizar produtos expirados.",
                        tangiveis: "Redu√ß√£o de 10% em produtos expirados; Poupan√ßa de ‚Ç¨4M/ano.",
                        intangiveis: "Melhoria da sustentabilidade com relat√≥rios ESG transparentes; Reputa√ß√£o com stakeholders.",
                        custos: "Economia estimada em ‚Ç¨1.5M/ano em gest√£o de res√≠duos.",
                        observacoes: "KPIs: 10% menos desperd√≠cio; √çndice de sustentabilidade melhorado."
                    },
                    {
                        nome: "Aumento de Vendas Cruzadas",
                        descricao: "An√°lise de cestas de compras para campanhas personalizadas.",
                        tangiveis: "Aumento de 8% no ticket m√©dio; Receita adicional de ‚Ç¨6.5M/ano.",
                        intangiveis: "Experi√™ncia cliente melhorada com apps personalizadas; Fideliza√ß√£o a longo prazo.",
                        custos: "Ganhos estimados em ‚Ç¨2M/ano em campanhas mais eficazes.",
                        observacoes: "KPIs: 8% aumento no ticket m√©dio; Taxa de convers√£o melhorada em 15%."
                    },
                    {
                        nome: "Efici√™ncia Log√≠stica",
                        descricao: "Tracking IoT de frota para otimiza√ß√£o de rotas e distribui√ß√£o.",
                        tangiveis: "Redu√ß√£o de 20% nos custos de transporte; Poupan√ßa de ‚Ç¨2.2M/ano.",
                        intangiveis: "Vantagem competitiva com estrat√©gia omnicanal; Diferencia√ß√£o da concorr√™ncia.",
                        custos: "Economia estimada em ‚Ç¨800.000/ano em combust√≠vel e manuten√ß√£o.",
                        observacoes: "KPIs: 20% redu√ß√£o em custos log√≠sticos; Tempo de entrega melhorado."
                    }
                ]
            },
            {
                titulo: "Universidade ‚Äî Governan√ßa Acad√©mica e Digitaliza√ß√£o",
                casos: [
                    {
                        nome: "Redu√ß√£o do Abandono Escolar",
                        descricao: "Dados preditivos de risco de insucesso para interven√ß√£o precoce.",
                        tangiveis: "Queda de 15% no abandono em 2 anos; Reten√ß√£o de ‚Ç¨2M em propinas.",
                        intangiveis: "Reputa√ß√£o acad√©mica melhorada em rankings internacionais (QS/Times); Atrai investigadores.",
                        custos: "Ganhos estimados em ‚Ç¨500.000/ano em custos de recrutamento.",
                        observacoes: "KPIs: 15% redu√ß√£o no abandono; Taxa de sucesso acad√©mico melhorada."
                    },
                    {
                        nome: "Efici√™ncia Administrativa",
                        descricao: "Processos digitais de matr√≠cula e gest√£o acad√©mica.",
                        tangiveis: "Tempo de matr√≠cula reduzido em 70%; Poupan√ßa de ‚Ç¨500.000/ano.",
                        intangiveis: "Experi√™ncia do estudante melhorada com portais integrados; Aumento da satisfa√ß√£o estudantil.",
                        custos: "Economia estimada em ‚Ç¨200.000/ano em processos manuais.",
                        observacoes: "KPIs: 70% redu√ß√£o no tempo de matr√≠cula; Satisfa√ß√£o estudantil acima de 85%."
                    },
                    {
                        nome: "Otimiza√ß√£o da Capta√ß√£o Internacional",
                        descricao: "Marketing baseado em dados para atrair estudantes estrangeiros.",
                        tangiveis: "Aumento de 12% em estudantes estrangeiros; Receita adicional de ‚Ç¨1.8M/ano.",
                        intangiveis: "Cultura de inova√ß√£o com uso de IA em investiga√ß√£o; Prest√≠gio institucional.",
                        custos: "Ganhos estimados em ‚Ç¨300.000/ano em campanhas mais direcionadas.",
                        observacoes: "KPIs: 12% aumento em estudantes internacionais; ROI de marketing melhorado."
                    }
                ]
            }
        ];

        function renderLista() {
            const lista = document.getElementById('listaUC');
            if (casosUso.length === 0) {
                lista.innerHTML = '<p class="text-gray-500 text-sm">Nenhum caso de uso adicionado ainda. Use o formul√°rio acima para come√ßar.</p>';
                return;
            }
            
            lista.innerHTML = '';
            casosUso.forEach((uc, index) => {
                const li = document.createElement('div');
                li.className = 'flex justify-between items-center p-3 bg-gray-100 rounded border-l-4 border-blue-500';
                li.innerHTML = `
                    <div>
                        <span class="font-medium">${uc.nome}</span>
                        <p class="text-sm text-gray-600 mt-1">${uc.descricao.substring(0, 80)}${uc.descricao.length > 80 ? '...' : ''}</p>
                    </div>
                    <div class="flex space-x-2">
                        <button onclick="editarUC(${index})" class="text-blue-600 hover:text-blue-800 text-sm">Editar</button>
                        <button onclick="removerUC(${index})" class="text-red-600 hover:text-red-800 text-sm">Remover</button>
                    </div>
                `;
                lista.appendChild(li);
            });
        }

        function renderTabelas() {
            const tangiveis = document.getElementById('tabelaTangiveis');
            const intangiveis = document.getElementById('tabelaIntangiveis');

            let htmlTangiveis = '<h3 class="font-semibold mb-2">Benef√≠cios Tang√≠veis ‚Äî valores conhecidos e documentados</h3>';
            htmlTangiveis += '<table class="min-w-full table-auto border-collapse border border-gray-300">';
            htmlTangiveis += '<thead><tr class="bg-gray-100">';
            htmlTangiveis += '<th class="border border-gray-300 px-4 py-2 text-left">Objetivo</th>';
            htmlTangiveis += '<th class="border border-gray-300 px-4 py-2 text-left">Como se mede</th>';
            htmlTangiveis += '<th class="border border-gray-300 px-4 py-2 text-left">Evid√™ncia/Exemplo</th>';
            htmlTangiveis += '<th class="border border-gray-300 px-4 py-2 text-left">Valor Estimado</th>';
            htmlTangiveis += '</tr></thead><tbody>';

            let htmlIntangiveis = '<h3 class="font-semibold mb-2">Benef√≠cios Intang√≠veis ‚Äî impacto financeiro/reputacional mas dif√≠cil de quantificar</h3>';
            htmlIntangiveis += '<table class="min-w-full table-auto border-collapse border border-gray-300">';
            htmlIntangiveis += '<thead><tr class="bg-gray-100">';
            htmlIntangiveis += '<th class="border border-gray-300 px-4 py-2 text-left">Impacto</th>';
            htmlIntangiveis += '<th class="border border-gray-300 px-4 py-2 text-left">Evid√™ncia/Exemplo</th>';
            htmlIntangiveis += '<th class="border border-gray-300 px-4 py-2 text-left">Observa√ß√£o</th>';
            htmlIntangiveis += '</tr></thead><tbody>';

            casosUso.forEach(uc => {
                // Para benef√≠cios tang√≠veis, vamos extrair objetivo, medida, evid√™ncia e valor
                const tangList = uc.tangiveis.split(';').map(b => b.trim()).filter(b => b);
                tangList.forEach(benef => {
                    // Tentar extrair valor monet√°rio ou percentual
                    const valorMatch = benef.match(/(‚Ç¨[\d,]+\/?\w*|[\d,]+%|\+[\d,]+%)/);
                    const valor = valorMatch ? valorMatch[0] : 'A quantificar';
                    const beneficioLimpo = benef.replace(/(‚Ç¨[\d,]+\/?\w*|[\d,]+%|\+[\d,]+%)/, '').trim();
                    
                    htmlTangiveis += '<tr>';
                    htmlTangiveis += `<td class="border border-gray-300 px-4 py-2">${uc.nome}</td>`;
                    htmlTangiveis += `<td class="border border-gray-300 px-4 py-2">${beneficioLimpo}</td>`;
                    htmlTangiveis += `<td class="border border-gray-300 px-4 py-2">${uc.descricao}</td>`;
                    htmlTangiveis += `<td class="border border-gray-300 px-4 py-2 font-semibold">${valor}</td>`;
                    htmlTangiveis += '</tr>';
                });

                // Para benef√≠cios intang√≠veis
                const intangList = uc.intangiveis.split(';').map(b => b.trim()).filter(b => b);
                intangList.forEach(benef => {
                    htmlIntangiveis += '<tr>';
                    htmlIntangiveis += `<td class="border border-gray-300 px-4 py-2">${benef}</td>`;
                    htmlIntangiveis += `<td class="border border-gray-300 px-4 py-2">${uc.descricao}</td>`;
                    htmlIntangiveis += `<td class="border border-gray-300 px-4 py-2">${uc.observacoes || 'Impacto significativo'}</td>`;
                    htmlIntangiveis += '</tr>';
                });
            });

            htmlTangiveis += '</tbody></table>';
            htmlIntangiveis += '</tbody></table>';

            tangiveis.innerHTML = casosUso.length > 0 ? htmlTangiveis : '<p class="text-gray-500">Adicione casos de uso para ver os benef√≠cios tang√≠veis.</p>';
            intangiveis.innerHTML = casosUso.length > 0 ? htmlIntangiveis : '<p class="text-gray-500">Adicione casos de uso para ver os benef√≠cios intang√≠veis.</p>';

            atualizarFeedback();
        }

        function adicionarUC(uc) {
            casosUso.push(uc);
            renderLista();
            renderTabelas();
        }

        function limparTudo() {
            if (confirm('Tem a certeza que deseja remover todos os casos de uso?')) {
                casosUso = [];
                renderLista();
                renderTabelas();
            }
        }

        function editarUC(index) {
            const uc = casosUso[index];
            document.getElementById('ucNome').value = uc.nome;
            document.getElementById('ucDescricao').value = uc.descricao;
            document.getElementById('ucTangiveis').value = uc.tangiveis;
            document.getElementById('ucIntangiveis').value = uc.intangiveis;
            document.getElementById('ucCustos').value = uc.custos;
            document.getElementById('ucObservacoes').value = uc.observacoes;
            
            // Remover o caso de uso da lista para que seja re-adicionado com as altera√ß√µes
            removerUC(index);
            
            // Scroll para o formul√°rio
            document.getElementById('ucForm').scrollIntoView({behavior: 'smooth'});
        }

        function removerUC(index) {
            casosUso.splice(index, 1);
            renderLista();
            renderTabelas();
        }

        function atualizarFeedback() {
            const feedback = document.getElementById('feedback');
            let tangCount = 0, intangCount = 0, kpiCount = 0;

            casosUso.forEach(uc => {
                tangCount += uc.tangiveis.split(';').filter(b => b.trim()).length;
                intangCount += uc.intangiveis.split(';').filter(b => b.trim()).length;
                if (uc.observacoes.toLowerCase().includes('kpi')) kpiCount++;
            });

            if (casosUso.length === 0) {
                feedback.innerHTML = '<p class="text-gray-500">Adicione casos de uso para ver o feedback.</p>';
                return;
            }

            let score = 0;
            let maxScore = 3;
            let feedbackText = '<div class="space-y-2">';
            
            // Verificar benef√≠cios tang√≠veis
            if (tangCount >= 3) {
                feedbackText += '<p class="text-green-600">‚úì Benef√≠cios tang√≠veis: Excelente! (' + tangCount + ' benef√≠cios)</p>';
                score++;
            } else {
                feedbackText += '<p class="text-yellow-600">‚ö† Benef√≠cios tang√≠veis: Adicione mais benef√≠cios quantific√°veis (' + tangCount + '/3 m√≠nimo)</p>';
            }
            
            // Verificar benef√≠cios intang√≠veis
            if (intangCount >= 2) {
                feedbackText += '<p class="text-green-600">‚úì Benef√≠cios intang√≠veis: Muito bem! (' + intangCount + ' benef√≠cios)</p>';
                score++;
            } else {
                feedbackText += '<p class="text-yellow-600">‚ö† Benef√≠cios intang√≠veis: Adicione mais benef√≠cios qualitativos (' + intangCount + '/2 m√≠nimo)</p>';
            }
            
            // Verificar KPIs
            if (kpiCount >= 1) {
                feedbackText += '<p class="text-green-600">‚úì KPIs: Perfeito! (' + kpiCount + ' KPI(s) identificado(s))</p>';
                score++;
            } else {
                feedbackText += '<p class="text-yellow-600">‚ö† KPIs: Adicione pelo menos 1 KPI nas observa√ß√µes</p>';
            }

            feedbackText += '<div class="mt-3 p-3 rounded border">';
            if (score === maxScore) {
                feedbackText += '<p class="text-green-700 font-semibold">üéØ Business Case consistente! Parab√©ns!</p>';
                feedbackText += '<p class="text-green-600 text-sm">O seu Business Case est√° completo e bem estruturado.</p>';
            } else {
                feedbackText += '<p class="text-yellow-700 font-semibold">üìù Business Case em desenvolvimento (' + score + '/' + maxScore + ')</p>';
                feedbackText += '<p class="text-yellow-600 text-sm">Continue a adicionar informa√ß√µes para completar o Business Case.</p>';
            }
            feedbackText += '</div></div>';

            feedback.innerHTML = feedbackText;
        }

        function gerarExemplo() {
            casosUso = exemplos[exemploIndex].casos.map(uc => ({...uc}));
            exemploIndex = (exemploIndex + 1) % exemplos.length;
            renderLista();
            renderTabelas();
        }

        function gerarExemplosDetalhados() {
            casosUso = exemplosDetalhados[exemploDetalhadoIndex].casos.map(uc => ({...uc}));
            exemploDetalhadoIndex = (exemploDetalhadoIndex + 1) % exemplosDetalhados.length;
            renderLista();
            renderTabelas();
        }

        function exportarMarkdown() {
            let md = '# Business Case\n\n';
            md += '## Benef√≠cios Tang√≠veis ‚Äî valores conhecidos e documentados\n\n';
            md += '| Caso de Uso | Benef√≠cio | Valor |\n|-------------|----------|-------|\n';

            casosUso.forEach(uc => {
                const tangList = uc.tangiveis.split(';').map(b => b.trim()).filter(b => b);
                tangList.forEach(benef => {
                    const parts = benef.split('em');
                    const beneficio = parts[0].trim();
                    const valor = parts[1] ? parts[1].trim() : '';
                    md += `| ${uc.nome} | ${beneficio} | ${valor} |\n`;
                });
            });

            md += '\n## Benef√≠cios Intang√≠veis ‚Äî impacto financeiro/reputacional mas dif√≠cil de quantificar\n\n';
            md += '| Caso de Uso | Benef√≠cio | Impacto |\n|-------------|----------|---------|\n';

            casosUso.forEach(uc => {
                const intangList = uc.intangiveis.split(';').map(b => b.trim()).filter(b => b);
                intangList.forEach(benef => {
                    md += `| ${uc.nome} | ${benef} | Impacto significativo |\n`;
                });
            });

            const blob = new Blob([md], { type: 'text/markdown;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'business-case.md';
            link.click();
        }

        function exportarCSV() {
            const BOM = '\uFEFF';
            let csv = BOM + 'Tipo,Caso de Uso,Benef√≠cio,Valor/Impacto\n';

            casosUso.forEach(uc => {
                const tangList = uc.tangiveis.split(';').map(b => b.trim()).filter(b => b);
                tangList.forEach(benef => {
                    const parts = benef.split('em');
                    const beneficio = parts[0].trim();
                    const valor = parts[1] ? parts[1].trim() : '';
                    csv += `Tang√≠vel,${uc.nome},"${beneficio}","${valor}"\n`;
                });

                const intangList = uc.intangiveis.split(';').map(b => b.trim()).filter(b => b);
                intangList.forEach(benef => {
                    csv += `Intang√≠vel,${uc.nome},"${benef}","Impacto significativo"\n`;
                });
            });

            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'business-case.csv';
            link.click();
        }

        document.getElementById('ucForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const uc = {
                nome: document.getElementById('ucNome').value,
                descricao: document.getElementById('ucDescricao').value,
                tangiveis: document.getElementById('ucTangiveis').value,
                intangiveis: document.getElementById('ucIntangiveis').value,
                custos: document.getElementById('ucCustos').value,
                observacoes: document.getElementById('ucObservacoes').value
            };
            adicionarUC(uc);
            this.reset();
        });

        document.getElementById('btnExemplo').addEventListener('click', gerarExemplo);
        document.getElementById('btnExemplosDetalhados').addEventListener('click', gerarExemplosDetalhados);
        document.getElementById('btnLimpar').addEventListener('click', limparTudo);
        document.getElementById('btnExportMD').addEventListener('click', exportarMarkdown);
        document.getElementById('btnExportCSV').addEventListener('click', exportarCSV);

        // Inicializa√ß√£o
        renderLista();
        renderTabelas();
    </script>
</body>
</html></content>
<parameter name="filePath">/workspaces/GSD-ACADEMY/docs/ETAPA 1 - Business Case/atividade-business-case.html
